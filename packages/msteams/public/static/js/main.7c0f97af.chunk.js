(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},180:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(85),i=n.n(o),l=(n(100),n(26)),c=n(27),u=n(29),s=n(28),m=n(30),h=n(184),d=n(186),p=n(187),g=n(21),b=n.n(g),v=n(19),f=n(45),y=n(84),w=n(33),S=n(185),T=new y.a({link:new w.a({uri:"/graphql",credentials:"same-origin"}),cache:new S.a}),E=function(){return r.a.createElement("div",null,r.a.createElement("div",null,"TeleSax Demo application allows you to communicate via SMS to your trusted partners. You will need to register a number first on RestComm and configure the same to be used for sending and receiving message. See the configuration page.",r.a.createElement("br",null),"NOTE: The Restcomm number should support message and voice"))},O=function(){return r.a.createElement("div",null,"Team Tabs")},j=n(58),I=n.n(j),C=n(51),N=n(91),k=n(59),x=n(60);function z(){var e=Object(k.a)(["\n  query getMemberById($teamId: String!) {\n    getMemberById(teamId: $teamId) {\n      teamId\n      teamName\n      channelId\n      channelName\n      phoneNumber\n    }\n  }\n"]);return z=function(){return e},e}function M(){var e=Object(k.a)(["\n  mutation registerMember($member: MSTeamRegister) {\n    registerMember(member: $member) {\n      result\n      desc\n    }\n  }\n"]);return M=function(){return e},e}var P=Object(x.a)(M()),B=Object(x.a)(z()),R=n(52),H=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).onTextChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(R.a)({},a,r)),r.length>6&&n.props.onTextChange(r)},n.state={restcommpstn:e.value||""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(v.TeamsThemeContext.Consumer,null,function(t){var n=t.rem,a=t.font,o=a.sizes,i=a.weights,l={header:Object(C.a)({},o.title,i.semibold),input:{paddingTop:n(.5),width:"50%"}};return r.a.createElement(v.Panel,null,r.a.createElement(v.PanelHeader,null,r.a.createElement("div",{style:l.header},"RestComm PTSN Number")),r.a.createElement(v.PanelBody,null,r.a.createElement(v.Input,{name:"restcommpstn",id:"restcommpstn",autoFocus:!0,style:l.input,placeholder:"PTSN Number",label:"Enter the RestComm PTSN Number",errorLabel:e.state.restcommpstn?null:"This value is required",value:e.state.restcommpstn,onChange:function(t){return e.onTextChange(t)},required:!0})),r.a.createElement(v.PanelFooter,null))})}}]),t}(a.Component),q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleSaveSettings=function(){var e=Object(N.a)(I.a.mark(function e(t){var a,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.location.protocol+"//"+window.location.host,e.prev=1,b.a.settings.setSettings({contentUrl:a,entityId:a}),e.next=5,n.props.mutate({variables:{member:Object(C.a)({phoneNumber:n.state.phoneNumber},n.currentTeam)}});case 5:r=e.sent,console.log(r),t.notifySuccess(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t.notifyFailure(),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),n.onTextChange=function(e){n.setState({phoneNumber:e}),b.a.settings.setValidityState(!0)},n.state={phoneNumber:"",teamId:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.initialize(),b.a.getContext(function(t){t&&(e.setState({teamId:t.teamId}),e.currentTeam={teamId:t.teamId,teamName:t.teamName,channelId:t.channelId,channelName:t.channelName,locale:t.locale,loginHint:t.loginHint})}),b.a.settings.registerOnSaveHandler(this.handleSaveSettings)}},{key:"componentWillUnmount",value:function(){b.a.settings.registerOnRemoveHandler(this.handleSaveSettings)}},{key:"render",value:function(){var e=this;return r.a.createElement(f.Query,{query:B,variables:{teamId:this.state.teamId}},function(t){var n=t.loading,a=t.data,o=t.error;if(n)return r.a.createElement("div",null,"Loading....");if(o)return r.a.createElement("div",null,"Unknown error. Try again");var i="";return a.getMemberById&&(i=a.getMemberById.phoneNumber),r.a.createElement("div",null,r.a.createElement(H,{value:i,onTextChange:e.onTextChange}))})}}]),t}(a.Component),F=Object(f.graphql)(P)(q),U=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={theme:v.ThemeStyle.Light,fontSize:16},n.pageFontSize=function(){var e=window.getComputedStyle(document.getElementsByTagName("html")[0]).getPropertyValue("font-size");e=e.replace("px","");var t=parseInt(e,10);return t||(t=16),t},n.updateTheme=function(e){var t;switch(e){case"dark":t=v.ThemeStyle.Dark;break;case"contrast":t=v.ThemeStyle.HighContrast;break;case"default":default:t=v.ThemeStyle.Light}n.setState({theme:t})},n.getQueryVariable=function(e){var t=window.location.search.substring(1).split("&"),n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value.split("=");if(decodeURIComponent(l[0])===e)return decodeURIComponent(l[1])}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return null},n.inTeams=function(){try{return window.self!==window.top}catch(e){return!0}},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateTheme(this.getQueryVariable("theme")),this.setState({fontSize:this.pageFontSize()}),this.inTeams()&&(b.a.initialize(),b.a.registerOnThemeChangeHandler(this.updateTheme))}},{key:"render",value:function(){var e=Object(v.getContext)({baseFontSize:this.state.fontSize,style:this.state.theme});return r.a.createElement(f.ApolloProvider,{client:T},r.a.createElement(v.TeamsThemeContext.Provider,{value:e},r.a.createElement(h.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a,{exact:!0,path:"/personal",component:E}),r.a.createElement(p.a,{path:"/team",component:O}),r.a.createElement(p.a,{path:"/configure",component:F}),r.a.createElement(p.a,{path:"/",component:E})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},95:function(e,t,n){e.exports=n(180)}},[[95,2,1]]]);
//# sourceMappingURL=main.7c0f97af.chunk.js.map